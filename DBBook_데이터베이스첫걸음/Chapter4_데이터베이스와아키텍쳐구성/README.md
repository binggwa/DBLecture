# 웹 서버 계층과 애플리케이션 계층
### 웹 서버
- 클라이언트로부터 접속 요청(HTTP 요청)을 직접 받아 그 처리를 애플리케이션 계층으로 넘기고, 클라이언트로 결과를 반환
- 아파치, IIS가 유명함
- 이렇게 사용자로부터 직접적인 접속 요청을 받는 역할을 웹 서버 계층에 한정하여 보안을 높일 수 있음
### 애플리케이션 계층
- 비즈니스로직을 구현한 애플리케이션 동작층
- 필요하면 DB 서버에 접속해서 데이터를 추출하고 가공한 결과를 웹 서버로 반환함
- 톰캣, 웹로직, 웹스피어가 유명
- 애플리케이션 계층에 비즈니스 로직을 집중해서 애플리케이션 관리 비용을 낮춤
# 데이터베이스 아키텍쳐 - 가용성과 확장성의 확보
### 가용성
- 서버가 1대밖에 없다면, 장애가 일어났을 때 서비스가 정지

### 확장성
- 서버가 1대밖에 없다면, 성능이 한계에 달하는 경우 서버를 상위 기종으로 교환하거나 고성능 부품으로 교환하는 것 외에는 성능개선이 불가

### 클러스터링
- 동일한 기능의 컴포넌트를 복수 개 준비해 한 개의 기능을 실현한다
- 클러스터 구성으로 시스템의 가동률을 높이는 것을 여유도를 확보한다, **다중화** 라고 지칭함
- 다중화는 내구성이 더 높고 견고하다는 의미가 있음
- SPOF (Single Point of Failure, 단일 장애점) : 다중화되어있지 않아 시스템 전체 서비스의 계속성에 영향을 주는 컴포넌트
### DB 서버의 다중화 - 클러스터링
- DB 서버는 데이터를 보존하는 영속 계층이기 때문에 다중화에 고민할 부분이 많음
- 데이터는 항상 갱신되기 때문에 **데이터 정합성**을 중요하게 의식해야 함
- DB 서버가 동시에 동작하는 것을 허락할지에 따라 2가지로 나뉨
  - Active-Active : 클러스터를 구성하는 컴포넌트를 동시에 가동한다. (Oracle의 RAC와 DB2의 pureScale 뿐)
  - Active-Standby : 클러스터를 구성하는 컴포넌트 중 실제 가동하는 것은 Active, 남은 것은 대기하고 있는다.
### Active-Active 구성의 장점
- 시스템 다운 시간이 짧음 : 복수의 DB 서버가 동시에 동작하고 있어서 시스템 전체가 정지하는 것을 방지할 수 있음
- 성능이 좋음 : 동시에 가동하는 CPU나 메모리도 증가하므로 성능 향상 but 저장소가 병목이 되기 때문에 생각만큼 올라가지 않을 가능성 존재
### Active-Standby 구성
- Active DB 서버에 장애가 일어날 때 사용되므로 전환까지 시차(수십 초에서 수 분)가 생김
- 그로 인해 서비스를 계속하는 것이 불가능한 다운상태 가능
- Cold-Standby : 평소에는 Standby가 작동하지 않다가 Active DB가 다운된 시점에 작동하는 구성
- Hot-Standby : 평소에도 Standby DB가 작동하는 구성 (Cold-Standby 보다 비쌈)
### DB 서버와 데이터의 다중화 - 리플리케이션
- 서버는 다중화되어도 데이터는 다중화되지 않는다는 단점 존재 : 저장소가 부서질 경우 데이터 손실
- 이런 상황에 대응하기 위한 클러스터 구성이 리플리케이션 : DB 서버와 저장소 세트를 복수로 준비하는 것
# 성능을 추구하기 위한 다중화 - Shared Nothing
- Active-Active 구성의 경우, 복수의 서버가 1대의 저장소를 공유하는 Shared Disk 상태이므로 병목이 일어날 수 있음
- 해당 타입은 DB 서버를 늘려도 무한으로 처리율이 향상되지 않는다
- DB 서버 대수가 증가할수록 DB 서버 간의 정보공유를 위한 오버헤드가 크기 때문
- 이 단점을 극복하기 위한 아키텍쳐로 고안된 것이 **_Shared Nothing_**
### Shared Nothing
- 네트워크 이외의 자원을 모두 분리하는 방식
- 서버와 저장소의 세트를 늘리면 병렬처리 때문에 선형적으로 성능이 향상되는 장점
- 각각의 DB 서버가 동일한 1개의 데이터에 액세스할 수 없다는 단점
- 단점에 대응하기 위해 **커버링** 구성을 고려해야 함
  - DB 서버 하나가 다운되었을 때 다른 DB 서버가 이를 이어받아 계속 처리할 수 있게 하는 구성